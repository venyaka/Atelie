# Atelie Management System

Данный проект представляет собой информационную систему для управления работой ателье. Главный акцент был сделан на **грамотную проектировку базы данных**, реализацию **ролевой модели безопасности**, поддержку **аудита действий**, защиту **данных на уровне строк**, шифрование и **резервное копирование**.

---


## Реализованный функционал

### Основные возможности
- **Управление правами пользователей**: настройка доступа к функциям системы в зависимости от ролей (ADMIN, MANAGER, CUTTER, CLIENT).
- **Выполнение запросов**: выполнение аналитических SQL-запросов по фильтрам (фамилия клиента, количество заказов, выкуп ткани и др.).
- **Управление таблицами**: учёт тканей, типов и использования по заказам.
- **Создание отчетов**: вывод агрегированных данных (отчёты по заказам, финансовый отчёт, заказы текущего месяца) в зависимости от роли пользователя.
- **Резервирование и восстановление**: создание резервных копий базы данных и восстановление из них без отключения приложения.


## Роли пользователей:

- **ADMIN** — полный доступ ко всем функциям системы
- **MANAGER** — управление заказами, просмотр отчетов
- **CUTTER** — доступ к своим заказам и отчетам
- **CLIENT** — просмотр и создание заказов

Каждая роль имеет доступ к определённым страницам, реализована кастомная аутентификация и разграничение прав.

---

## Безопасность и права доступа

### Авторизация и аутентификация:
- Реализована с использованием **Spring Security**
- Страница входа и выхода
- Поддержка **SSL-соединений**
- Обработка сессий

### Назначение прав и защита данных
- Авторизация через Spring Security
- Разграничение прав доступа по ролям (ADMIN, MANAGER, CUTTER, CLIENT)
- Управление правами: **предопределённые роли, GRANT, REVOKE, DENY**
- **Шифрование паролей**, SSL-соединение
- **Защита от SQL-инъекций**, аудит операций
- **Защита на уровне строк**, маскирование данных

---

## Работа с Базой Данных

### Проектирование БД
- Акцент на **нормализацию и целостность данных**
- Использование **хранимых процедур** для операций доступа
- **Индексы** разных типов для оптимизации поиска (в т.ч. составные и частичные)
- Представления (view) для отображения отчетов по ролям

### Аудит и журналирование
- Фиксация всех критичных действий в БД
- Вывод аудит-отчетов по пользователям

### Резервное копирование
- Возможность сделать **бэкап базы данных** (`.bak`) по кнопке
- Функционал для **восстановления из резервной копии**

---

## Основной функционал приложения

### Интерфейс приложения
- Разработан на основе **Spring Boot + Thymeleaf**
- Современный, интуитивно понятный UI
- Адаптирован под роли: отображаются только разрешенные действия

### Отчёты
- Доступны отчёты и представления в зависимости от роли:
  - Финансовый отчёт за день
  - Кол-во заказов по закройщикам
  - Статистика по тканям и категориям изделий

### Управление данными
- Просмотр и редактирование таблиц:
  - Клиенты, закройщики, ткани, заказы, категории, касса и др.
- Поиск, фильтрация, создание и удаление сущностей

---

## Реализованные страницы

| Страница | Описание |
|---------|----------|
| `/register` | Страница регистрации |
| `/login` | Страница входа |
| `/dashboard` | Главная панель пользователя |
| `/dashboard/table` | Управление таблицами |
| `/dashboard/permissions` | Управление правами пользователей |
| `/dashboard/queries` | Выполнение SQL-запросов (5 блоков с разными задачами) |
| `/dashboard/backup` | Бэкап и восстановление базы |
| `/dashboard/reports` | Отчеты по заказам, кассе и др. |

---

## Технологии


- **Backend**: Java 17, Spring Boot, Spring MVC, Spring Security, Spring Data JPA, JDBC
- **Frontend**: Thymeleaf, HTML, Bootstrap
- **Database**: PostgreSQL / Microsoft SQL Server
- **Сборка**: Maven
- **Контейнеризация**: (опционально) Docker

| Компонент     | Технологии                                |
|---------------|--------------------------------------------|
| Backend       | Java 17, Spring Boot, Spring MVC, Spring Security, Spring Data JPA, JDBC |
| Frontend      | Thymeleaf, HTML, Bootstrap                |
| Database      | PostgreSQL / MS SQL Server                 |
| Безопасность  | Spring Security        |
| Сборка        | Maven                                 |
| Контейнеризация| Docker                                 |
---

## Запуск проекта

1. Клонируйте репозиторий:
   ```bash
   git clone https://github.com/your-username/atelie-system.git
   cd atelie-system
   ```

2. Настройте `application.properties`:
   ```properties
   spring.datasource.url=jdbc:sqlserver://localhost;encrypt=true;trustServerCertificate=true;database=Atelie
   spring.datasource.username=metabase_user
   spring.datasource.password=12345
   ```

3. Запустите приложение:
   ```bash
   ./mvnw spring-boot:run
   ```

4. Откройте в браузере:
   ```
   http://localhost:8080
   ```
